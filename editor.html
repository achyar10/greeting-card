<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Achyar Anshorie">
    <title>Starter App</title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/custom.css" rel="stylesheet">

    <!-- Favicons -->
    <meta name="theme-color" content="#7952b3">
</head>

<body class="d-flex flex-column h-100">

    <!-- Begin page content -->
    <div class="container mt-3">
        <h1 class="display-6 fw-bold text-center">Hello there, text here</h1>
        <div class="row mt-4">
            <div class="col-md-5">
                <img src="/assets/images/eid.png" id="imgtes" alt="img" class="bd-placeholder-img card-img-top"
                    width="100%">
            </div>
            <div class="col-md-5">
                <div class="row">
                    <div class="col">
                        <div class="form-group mb-2">
                            <label for="" class="fw-bold">Text</label>
                            <select name="" id="" class="form-select mb-2">
                                <option value="serif">Poppins</option>
                            </select>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group mb-2">
                            <label for="" class="fw-bold">Align</label><br>
                            <div class="btn-group" role="group" aria-label="Basic outlined example">
                                <button type="button" class="btn btn-outline-secondary"><i class="fa-solid fa-align-left"></i></button>
                                <button type="button" class="btn btn-outline-secondary"><i class="fa-solid fa-align-center"></i></button>
                                <button type="button" class="btn btn-outline-secondary"><i class="fa-solid fa-align-right"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group mb-2">
                    <textarea name="free_text" id="free_text" class="form-control"
                        placeholder="Edit text here...">Edit text here...</textarea>
                </div>
                <button class="btn btn-primary rounded-pill px-4 btn-sm" onclick="saveImage()"><i
                        class="fa fa-download"></i>
                    Save</button>
                <button class="btn btn-danger rounded-pill px-4 btn-sm"><i class="fa-solid fa-share-nodes"></i>
                    Share</button>
                <button class="btn btn-warning rounded-pill px-4 btn-sm text-white"><i class="fa fa-envelope"></i>
                    Send</button>
            </div>

        </div>
    </div>


    <script src="/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/watermark.min.js"></script>
    <script src="https://kit.fontawesome.com/b27a94bbfa.js" crossorigin="anonymous"></script>

    <script>

        const free_text = document.querySelector('#free_text');

        const options = {
            init(img) {
                img.crossOrigin = 'anonymous'
            }
        };

        free_text.addEventListener('keyup', (e) => {
            const text = e.target.value;

            watermark(['assets/images/eid.png'], options)
                .image(watermark.text.center(text, '50px serif', '#fff', 1))
                .then(function (img) {
                    document.getElementById('imgtes').src = img.src;
                });
        })

        watermark(['assets/images/eid.png'], options)
            .image(watermark.text.center(free_text.value, '50px serif', '#fff', 1))
            .then(function (img) {
                document.getElementById('imgtes').src = img.src;
            });

        function saveImage() {
            var a = document.createElement('a');
            a.href = document.getElementById('imgtes').src;
            a.download = `${new Date().getTime()}.png`;
            a.click()
        }


    </script>

</body>

</html>